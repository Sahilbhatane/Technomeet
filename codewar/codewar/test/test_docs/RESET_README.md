# CodeWar Platform - Reset Script Guide

## Overview

The reset script allows administrators to completely reset all competition data and cached information. This is useful for:
- Testing the platform
- Resetting after a test run
- Handling unexpected errors during the event
- Starting fresh for a new competition

## Files

1. **`reset.py`** - Python script to generate reset page and verify password
2. **`reset.html`** - Web page for browser-based reset (auto-generated)
3. **`RESET_README.md`** - This file

## Default Admin Password

**Password:** `CodeWar2026Admin!`

⚠️ **IMPORTANT:** Change this password before the actual event!

## How to Use

### Method 1: Using the Python Script (Recommended)

1. **Run the reset script:**
   ```bash
   cd codewar
   python reset.py
   ```

2. **Enter the admin password when prompted:**
   ```
   Enter admin password: [password is hidden]
   ```

3. **The script will:**
   - Verify the password
   - Create/update `reset.html` page
   - Provide instructions

4. **Open the reset page in browser:**
   ```
   http://localhost:8000/codewar/reset.html
   ```

5. **Enter password and click "Reset All Data"**

### Method 2: Direct Browser Access

1. **Navigate to:**
   ```
   http://localhost:8000/codewar/reset.html
   ```

2. **Enter admin password:** `CodeWar2026Admin!`

3. **Click "Reset All Data"**

4. **All browser storage will be cleared**

## What Gets Reset

The reset clears:
- ✅ All localStorage data (progress, answers, scores)
- ✅ All sessionStorage data (session info, timers)
- ✅ All cookies
- ✅ All round completion status
- ✅ All user authentication sessions
- ✅ All saved answers and solutions
- ✅ All timer states

## Changing the Password

### Step 1: Generate New Password Hash

```bash
python -c "import hashlib; print(hashlib.sha256('YOUR_NEW_PASSWORD'.encode()).hexdigest())"
```

### Step 2: Update reset.py

Edit `reset.py` and replace:
```python
PASSWORD_HASH = "4e87b5d105292fd5e8d108858245658bb8cd759572c39f991b08cca92e2bef8c"
```

With your new hash.

### Step 3: Update reset.html

The `reset.html` file is auto-generated by `reset.py`, so just run:
```bash
python reset.py
```

It will update the file with the new password hash.

## Security Notes

1. **Password is hashed** - The actual password is never stored, only its SHA256 hash
2. **Hidden input** - Password input is hidden in terminal (using `getpass`)
3. **Client-side verification** - Reset page also verifies password before clearing data
4. **Admin only** - Only administrators should know the password

## Troubleshooting

### Script won't run
- Make sure Python 3 is installed
- Check file permissions: `chmod +x reset.py` (Linux/Mac)

### Password not working
- Make sure you're using the correct password: `CodeWar2026Admin!`
- Check if password hash was changed correctly

### Reset page not clearing data
- Open browser DevTools (F12)
- Check Console for errors
- Manually clear storage:
  - Application tab → Local Storage → Clear
  - Application tab → Session Storage → Clear

### Data still persists after reset
- Clear browser cache: Ctrl+Shift+Delete
- Try incognito/private mode
- Check if multiple tabs are open (close all)

## Manual Reset (If Script Fails)

### Chrome/Edge:
1. Press F12 (DevTools)
2. Application tab
3. Local Storage → `http://localhost:8000` → Right-click → Clear
4. Session Storage → `http://localhost:8000` → Right-click → Clear

### Firefox:
1. Press F12 (DevTools)
2. Storage tab
3. Local Storage → `http://localhost:8000` → Right-click → Delete All
4. Session Storage → `http://localhost:8000` → Right-click → Delete All

### Safari:
1. Enable Develop menu (Preferences → Advanced)
2. Develop → Show Web Inspector
3. Storage tab → Clear all

## Quick Reset Command

For quick access, you can create an alias:

**Windows (PowerShell):**
```powershell
function Reset-CodeWar { cd codewar; python reset.py }
```

**Linux/Mac (Bash):**
```bash
alias reset-codewar='cd codewar && python reset.py'
```

Then just run: `reset-codewar`

## Best Practices

1. **Change password before event** - Don't use default password
2. **Test reset before event** - Make sure it works
3. **Document password** - Store securely (password manager)
4. **Backup data** - If needed, export data before reset
5. **Inform users** - Let participants know if reset is needed

## Support

If reset doesn't work:
1. Check browser console for errors
2. Verify password hash matches in both files
3. Try manual browser storage clear
4. Restart server after reset

---

**Remember:** This is a destructive operation. All data will be permanently deleted!
